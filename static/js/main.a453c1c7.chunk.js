(this["webpackJsonpminesweeper-pet-project"]=this["webpackJsonpminesweeper-pet-project"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(32)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i,r,o,a,c,s,l,u,f,p,d,m,b,v,h,y,O,k,w,j,g,E,C,N,S=n(0),D=n.n(S),_=n(7),M=n.n(_),T=(n(18),n(19),n(4)),P=(n(20),Object(T.c)((function(e){var t=e.state,n=e.opened,i=e.marked,r=e.minesCount,o=e.handleLeftClick,a=e.handleRightClick;return D.a.createElement("div",{onClick:o,onContextMenu:function(e){e.preventDefault(),null===a||void 0===a||a()},className:"block".concat(i?" marked":""," ").concat(n?"opened ".concat(t," ").concat(function(e){var t,n={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine"};return null!==(t=null===n||void 0===n?void 0:n[e])&&void 0!==t?t:"zero"}(r)):"closed")},n&&r>0&&r)}))),F=(n(23),Object(T.c)((function(e){var t=e.win,n=e.gameOver,i=e.handleClick;return D.a.createElement("div",{onClick:i,className:"face".concat(t?" face--win":"").concat(n?" face--game-over":"")})}))),z=(n(24),n(5)),B=n(6),I=n(11),G=n(12),L=n(2),R=(n(25),n(1)),W={beginner:{id:"beginner",name:"\u041d\u043e\u0432\u0438\u0447\u043e\u043a",cols:9,rows:9,mines:10},intermediate:{id:"intermediate",name:"\u041b\u044e\u0431\u0438\u0442\u0435\u043b\u044c",cols:16,rows:16,mines:40},professional:{id:"professional",name:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b",cols:30,rows:16,mines:99}},x=n(3),A={opened:!1,state:"empty",marked:!1},J=new(i=Object(x.persist)("object"),r=Object(x.persist)("list"),o=R.action.bound,a=R.action.bound,c=R.action.bound,s=R.action.bound,l=R.action.bound,u=R.action.bound,f=R.action.bound,p=R.action.bound,d=R.action.bound,m=R.action.bound,b=R.action.bound,v=R.action.bound,h=function(){function e(){var t=this;Object(I.a)(this,e),Object(z.a)(this,"difficulty",y,this),Object(z.a)(this,"field",O,this),Object(z.a)(this,"gameOver",k,this),Object(z.a)(this,"shiftMode",w,this),Object(z.a)(this,"win",j,this),Object(z.a)(this,"gameStarted",g,this),Object(z.a)(this,"minesCount",E,this),Object(z.a)(this,"time",C,this),Object(z.a)(this,"startTimeout",N,this),this.noClosedFieldsLeft=function(){for(var e=t.difficulty,n=e.cols,i=e.rows,r=t.field,o=0;o<i;o++)for(var a=0;a<n;a++)if(!r[o][a].opened&&!r[o][a].marked)return!1;return!0},this.generateField(),this.placeMines(),this.placeNumbers()}return Object(G.a)(e,[{key:"setDifficulty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"beginner";this.difficulty=W[e],this.restartGame()}},{key:"setShiftState",value:function(e){this.shiftMode=e}},{key:"generateField",value:function(){for(var e=this.difficulty,t=e.cols,n=e.rows,i=this.field,r=0;r<n;r++){i.push([]);for(var o=0;o<t;o++)i[r].push(A)}}},{key:"placeMines",value:function(){for(var t=this.difficulty,n=t.mines,i=t.rows,r=t.cols,o=this.field,a=0;a<n;a++){var c=f(),s=Object(B.a)(c,2),l=s[0],u=s[1];this.field[l][u].state="mine"}function f(){for(var t=e.getRandomInt(i),n=e.getRandomInt(r);"empty"!=o[t][n].state;)t=e.getRandomInt(i),n=e.getRandomInt(r);return[t,n]}}},{key:"placeNumbers",value:function(){for(var e=this.difficulty,t=e.cols,n=e.rows,i=this.field,r=0;r<n;r++)for(var o=0;o<t;o++)"mine"!==i[r][o].state&&(i[r][o].minesCount=a(r,o),i[r][o].minesCount>0&&(i[r][o].state="closeToMine"));function a(e,t){var n=0;return[[e-1,t-1],[e,t-1],[e+1,t-1],[e-1,t],[e,t],[e+1,t],[e-1,t+1],[e,t+1],[e+1,t+1]].forEach((function(e){var t,r=Object(B.a)(e,2),o=r[0],a=r[1];(null===i||void 0===i||null===(t=i[o])||void 0===t?void 0:t[a])&&"mine"===i[o][a].state&&n++})),n}}},{key:"openField",value:function(){for(var e=this.difficulty,t=e.cols,n=e.rows,i=this.field,r=0;r<n;r++)for(var o=0;o<t;o++)i[r][o].opened=!0}},{key:"restartGame",value:function(){this.gameOver=!1,this.win=!1,this.time=0,this.minesCount=this.difficulty.mines,this.field=[],this.gameStarted=!1,clearInterval(this.startTimeout),this.generateField(),this.placeMines(),this.placeNumbers()}},{key:"startTimer",value:function(){var e=this;this.startTimeout=setInterval((function(){e.time+=1e3}),1e3)}},{key:"checkClosedBlock",value:function(e,t){if(!this.win){this.gameStarted||(this.gameStarted=!0,this.startTimer());var n=this.field,i=this.shiftMode,r=this.openField,o=this.setGameOver,a=this.checkWin,c=n[e][t];if(i){if(c.opened&&"closeToMine"===c.state&&function(e,t){var i=0;return[[e-1,t-1],[e,t-1],[e+1,t-1],[e-1,t],[e,t],[e+1,t],[e-1,t+1],[e,t+1],[e+1,t+1]].forEach((function(e){var t,r=Object(B.a)(e,2),o=r[0],a=r[1],c=null===n||void 0===n||null===(t=n[o])||void 0===t?void 0:t[a];c&&c.marked&&i++})),n[e][t].minesCount===i}(e,t))return void function(e,t){[[e-1,t-1],[e,t-1],[e+1,t-1],[e-1,t],[e,t],[e+1,t],[e-1,t+1],[e,t+1],[e+1,t+1]].forEach((function(e){var t,i=Object(B.a)(e,2),r=i[0],o=i[1],a=null===n||void 0===n||null===(t=n[r])||void 0===t?void 0:t[o];!a||a.marked||a.opened||s(r,o)}))}(e,t);if(c.opened)return;a()}else{if(c.opened||c.marked&&!i)return;s(e,t)}}function s(e,t){var i=n[e][t];if("mine"===i.state)return r(),o(!0),void(i.state="destroyed");!function e(t,i){var r;if(!(null===n||void 0===n||null===(r=n[t])||void 0===r?void 0:r[i])||n[t][i].marked||n[t][i].opened||"mine"===n[t][i].state)return;n[t][i].opened=!0,[[t-1,i-1],[t,i-1],[t+1,i-1],[t-1,i],[t,i],[t+1,i],[t-1,i+1],[t,i+1],[t+1,i+1]].forEach((function(r){var o,a=Object(B.a)(r,2),c=a[0],s=a[1];t==c&&i==s||"empty"===(null===n||void 0===n||null===(o=n[t])||void 0===o?void 0:o[i].state)&&e(c,s)}))}(e,t),a()}}},{key:"markBlock",value:function(e,t){var n=this.field[e][t];n.opened||(n.marked=!n.marked,n.marked?this.minesCount--:this.minesCount++)}},{key:"setGameOver",value:function(e){this.gameOver=e,e&&clearInterval(this.startTimeout)}},{key:"checkWin",value:function(){if(0===this.minesCount&&this.noClosedFieldsLeft()&&!this.gameOver)return this.win=!0,void clearInterval(this.startTimeout);this.win=!1}}],[{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*Math.floor(e))}}]),e}(),y=Object(L.a)(h.prototype,"difficulty",[i,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.intermediate}}),O=Object(L.a)(h.prototype,"field",[r,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=Object(L.a)(h.prototype,"gameOver",[x.persist,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(L.a)(h.prototype,"shiftMode",[x.persist,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=Object(L.a)(h.prototype,"win",[x.persist,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=Object(L.a)(h.prototype,"gameStarted",[x.persist,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=Object(L.a)(h.prototype,"minesCount",[x.persist,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=Object(L.a)(h.prototype,"time",[x.persist,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=Object(L.a)(h.prototype,"startTimeout",[x.persist,R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(L.a)(h.prototype,"setDifficulty",[o],Object.getOwnPropertyDescriptor(h.prototype,"setDifficulty"),h.prototype),Object(L.a)(h.prototype,"setShiftState",[a],Object.getOwnPropertyDescriptor(h.prototype,"setShiftState"),h.prototype),Object(L.a)(h.prototype,"generateField",[c],Object.getOwnPropertyDescriptor(h.prototype,"generateField"),h.prototype),Object(L.a)(h.prototype,"placeMines",[s],Object.getOwnPropertyDescriptor(h.prototype,"placeMines"),h.prototype),Object(L.a)(h.prototype,"placeNumbers",[l],Object.getOwnPropertyDescriptor(h.prototype,"placeNumbers"),h.prototype),Object(L.a)(h.prototype,"openField",[u],Object.getOwnPropertyDescriptor(h.prototype,"openField"),h.prototype),Object(L.a)(h.prototype,"restartGame",[f],Object.getOwnPropertyDescriptor(h.prototype,"restartGame"),h.prototype),Object(L.a)(h.prototype,"startTimer",[p],Object.getOwnPropertyDescriptor(h.prototype,"startTimer"),h.prototype),Object(L.a)(h.prototype,"checkClosedBlock",[d],Object.getOwnPropertyDescriptor(h.prototype,"checkClosedBlock"),h.prototype),Object(L.a)(h.prototype,"markBlock",[m],Object.getOwnPropertyDescriptor(h.prototype,"markBlock"),h.prototype),Object(L.a)(h.prototype,"setGameOver",[b],Object.getOwnPropertyDescriptor(h.prototype,"setGameOver"),h.prototype),Object(L.a)(h.prototype,"checkWin",[v],Object.getOwnPropertyDescriptor(h.prototype,"checkWin"),h.prototype),h);n(29);var $=function(e){var t=e.digits,n=void 0===t?3:t,i=""+e.count;return D.a.createElement("div",{className:"counter"},i.padStart(n,"0"))},q=(n(30),n(31),function(){return D.a.createElement("div",{className:"info"},D.a.createElement("div",{className:"info__row"},D.a.createElement("span",{className:"info__pkm"}),D.a.createElement("span",{className:"info__desc"},"\u2014 \u043f\u043e\u043c\u0435\u0442\u0438\u0442\u044c \u044f\u0447\u0435\u0439\u043a\u0443")),D.a.createElement("div",{className:"info__row"},D.a.createElement("strong",null,"Shift + "),D.a.createElement("span",{className:"info__lkm"}),D.a.createElement("span",{className:"info__desc"}," \u2014 \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0446\u0438\u0444\u0440\u0443")))}),H=function(e){var t=e.difficulty,n=e.setDifficulty;return D.a.createElement("div",{className:"frame difficulty"},D.a.createElement("div",null,"\u0421\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c:",D.a.createElement("select",{name:"difficulty",className:"difficulty__select",onChange:function(e){null===n||void 0===n||n(e.target.value)},value:t.id},Object.keys(W).map((function(e){return D.a.createElement("option",{className:"difficulty__item",key:W[e].id,value:W[e].id},W[e].name)})))),D.a.createElement(q,null))},K=Object(T.c)((function(){var e=function(e){var t=Object(S.useState)(!1),n=Object(B.a)(t,2),i=n[0],r=n[1];function o(t){t.key===e&&r(!0)}var a=function(t){t.key===e&&r(!1)};return Object(S.useEffect)((function(){return window.addEventListener("keydown",o),window.addEventListener("keyup",a),function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",a)}}),[]),i}("Shift"),t=D.a.useContext(T.a).AppStore,n=t.minesCount,i=t.time,r=t.field,o=t.win,a=t.gameOver,c=t.difficulty,s=t.checkClosedBlock,l=t.markBlock,u=t.restartGame,f=t.setShiftState,p=t.setDifficulty;return f(e),D.a.createElement("div",{className:"board"},D.a.createElement("div",{className:"field"},D.a.createElement("div",{className:"board__header-row"},D.a.createElement($,{count:n}),D.a.createElement(F,{win:o,gameOver:a,handleClick:u}),D.a.createElement($,{count:i/1e3})),D.a.createElement("div",{className:"frame"},r.map((function(e,t){return D.a.createElement("div",{className:"row",key:t},e.map((function(e,n){var i=e.state,r=e.opened,o=e.marked,a=e.minesCount,c=void 0===a?0:a;return D.a.createElement(P,{handleLeftClick:function(){return s(t,n)},handleRightClick:function(){return l(t,n)},state:i,opened:r,marked:o,minesCount:c,key:n})})))}))),D.a.createElement(H,{difficulty:c,setDifficulty:p})))})),Q=function(){return Object(x.create)()("app-store",J).then((function(){J.gameStarted&&J.startTimer()})),document.onselectstart=function(){return!1},D.a.createElement(T.b,{AppStore:J},D.a.createElement("div",{className:"App"},D.a.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));M.a.render(D.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[13,1,2]]]);
//# sourceMappingURL=main.a453c1c7.chunk.js.map